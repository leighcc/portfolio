(function(){var e=document.getElementById("banner"),t=e.getElementsByClassName("list")[0],n=e.getElementsByTagName("span"),a=1,r=false,i;function o(e){r=true;var n=parseInt(t.style.marginLeft)+e;t.style.marginLeft=n+"%";if(n>0){t.style.marginLeft=-200+"%"}if(n<-200){t.style.marginLeft=0+"%"}c();u()}function l(){i=setInterval(function(){m()},5e3)}function s(){clearInterval(i)}function c(){for(var e=n.length-1;e>=0;e--){if(n[e].className=="cur"){n[e].className="";break}}n[a-1].className="cur"}function m(){if(a==3){a=1}else{a+=1}if(!r){o(-100)}}function u(){var e=1,n=500,a=25,i=100/(n/a);f(t,0);(function o(){if(e<=n/a){f(t,i*e);e+=1;setTimeout(o,a)}else{r=false}})()}function f(e,t){e.style.opacity=t/100}for(var d=n.length-1;d>=0;d--){n[d].addEventListener("click",function(){var e=parseInt(this.getAttribute("index")),t=-100*(e-a);a=e;if(!r){o(t)}})}e.addEventListener("mouseover",s);e.addEventListener("mouseout",l);l()})();(function(){var e=document.getElementById("m-message");close=e.getElementsByClassName("wrap")[0].getElementsByTagName("div")[0];cookie=getCookie();if(!cookie.noTips){e.style.display="block"}addClickEvent(close,function(t){setCookie("noTips",1,new Date(9999,9));e.style.display="none"})})();(function(){var e=document.getElementById("video");var t=document.getElementsByClassName("m-video")[0];var n=t.getElementsByClassName("u-btn")[0];addClickEvent(e,function(){t.style.display="block"});addClickEvent(n,function(){t.style.display="none"})})();(function(){var e=document.getElementsByClassName("head-follow")[0].getElementsByClassName("u-btn")[0];var t=document.getElementsByClassName("head-follow")[0].getElementsByClassName("followed")[0];var n=document.getElementsByClassName("m-login")[0];r();addClickEvent(e,function(){var e=getCookie();if(!e.loginSuc){n.style.display="block"}else{a()}event.preventDefault()});function a(){var e="http://study.163.com/webDev/ attention.htm";makeRequest(e,null,t);function t(e){if(e==1){setCookie("followSuc",1,new Date(9999,9));r()}else{alert("关注失败")}}}function r(){var n=getCookie();if(n.followSuc==1){e.style.display="none";t.style.display="inline-block"}else{e.style.display="inline-block";t.style.display="none"}}(function(){var e=document.forms.login;var t=document.getElementById("account");var r=document.getElementById("password");var i=n.getElementsByTagName("span")[0];addClickEvent(i,function(){n.style.display="none"});addEvent(e,"submit",function(e){var n=md5(t.value);var a=md5(r.value);var i={userName:n,password:a};var s="http://study.163.com/webDev/login.htm";if(n===""||a===""){o(true);return}e.preventDefault();makeRequest(s,i,l);o(true)});function o(t){e.loginBtn.disabled=!!t}function l(e){if(e==1){n.style.display="none";setCookie("loginSuc",1,new Date(9999,9));a()}else{alert("用户名或密码错误")}}})()})();(function(){var e="http://study.163.com/webDev/hotcouresByCategory.htm";var t=document.getElementsByClassName("right")[0].getElementsByClassName("list")[0];var n=t.getElementsByTagName("li");makeRequest(e,null,a);function a(e){var a=JSON.parse(e);var r=document.getElementsByClassName("right")[0].getElementsByClassName("proto")[0];for(var i=0;i<a.length;i++){var o=r.cloneNode(true);removeClass(o,"proto");var l=o.getElementsByTagName("img")[0];var s=o.getElementsByTagName("h3")[0];var c=o.getElementsByTagName("span")[0];l.src=a[i].smallPhotoUrl;l.alt=a[i].name;s.innerText=a[i].name;c.innerText=a[i].learnerCount;r.parentNode.appendChild(o)}setInterval(m,5e3);function m(){var e=n[20].cloneNode(true);t.insertBefore(e,n[1]);roll(t,{bottom:-990},function(){t.removeChild(n[21]);t.style.bottom="-900px"})}}})();var roll=function(){return function(e,t,n,a,r){if(typeof n=="undefined"){n=400;a="linear"}if(typeof n=="string"){if(typeof a=="function"){r=a}a=n;n=400}else if(typeof n=="function"){r=n;n=400;a="linear"}else if(typeof n=="number"){if(typeof a=="function"){r=a;a="linear"}else if(typeof a=="undefined"){a="linear"}}var i={};for(var o in t){i[o]=0;if(o=="opacity"){i[o]=Math.round(s(e,o)*100)}else{i[o]=parseInt(s(e,o))}}var l=c();clearInterval(e.timer);e.timer=setInterval(function(){var o=c();var s=n-Math.max(0,l-o+n);for(var u in t){var f=m[a](s,i[u],t[u]-i[u],n);if(u=="opacity"){e.style.opacity=f/100;e.style.filter="alpha(opacity="+f+")"}else{e.style[u]=f+"px"}}if(s==n){clearInterval(e.timer);if(r){r.call(e)}}},13);function s(e,t){if(e.currentStyle){return e.currentStyle[t]}else{return getComputedStyle(e,false)[t]}}function c(){return(new Date).getTime()}var m={linear:function(e,t,n,a){return n*e/a+t}}}}();(function(){var e="http://study.163.com/webDev/couresByCategory.htm";var t=20;var n=10;var a=document.getElementsByClassName("left")[0].getElementsByClassName("tab")[0];var r=a.getElementsByTagName("li");var o=document.getElementsByClassName("page-pre")[0];delegateEvent(a,"ul","click",function(e,t){if(n!=e.getAttribute("data")){for(i=0;i<r.length;i++){removeClass(r[i],"active")}addClass(e,"active");n=e.getAttribute("data");o.innerHTML="";l(1)}t.preventDefault()});function l(a){var r={pageNo:a,psize:t,type:n};makeRequest(e,r,function(e){s(e,a)})}function s(e,t){var n=JSON.parse(e);var a={id:o,nowNum:t,allNum:n.totalPage,childLength:8,callback:c};m(e);o.innerHTML="";u(a)}function c(a,r){console.log("分页器："+a);var i={pageNo:a,psize:t,type:n};makeRequest(e,i,m)}function m(e){var t=JSON.parse(e);console.log(t);console.log("获取的页码："+t.pagination.pageIndex);var n=document.querySelectorAll(".course-item");for(var a=n.length-1;a>0;a--){n[a].parentNode.removeChild(n[a])}var r=document.getElementsByClassName("left")[0].getElementsByClassName("proto")[0];for(var a=0,i=t.list;a<i.length;a++){var o=r.cloneNode(true);removeClass(o,"proto");var l=o.getElementsByTagName("img")[0];var s=o.getElementsByTagName("p")[0];var c=o.getElementsByClassName("provider")[0];var m=o.getElementsByClassName("u-btn")[0];var u=o.getElementsByTagName("em")[0];var f=o.getElementsByClassName("kindname")[0];var d=o.getElementsByClassName("detail")[0];l.src=i[a].middlePhotoUrl;l.alt=i[a].name;s.innerText=i[a].name;c.innerText=i[a].provider;m.innerText=i[a].learnerCount;u.innerText="￥"+i[a].price+".00";f.innerText=i[a].categoryName;d.innerText=i[a].description;r.parentNode.appendChild(o);var v=document.createTextNode(" ");r.parentNode.appendChild(v)}}function u(e){if(!e.id){return false}var t=e.id;var n=e.nowNum||1;var a=e.childLength;var r=e.allNum||a;var i=e.callback||function(){};var o=Math.floor(a/2)+1;var l=function(e){var t=document.createElement("a");t.setAttribute("index",e);t.className="page-item";t.innerText=e;if(n==e){addClass(t,"active")}return t};var s=document.createElement("a");s.setAttribute("index",n-1);s.className="u-btn";t.appendChild(s);if(r<=a){for(var c=1;c<=r;c++){var s=l(c);t.appendChild(s)}}else{for(var c=1;c<=a;c++){if(n<o){var s=l(c)}else if(r-n<=o){var s=l(r-a+c)}else{var s=l(n-o+c)}t.appendChild(s)}}var s=document.createElement("a");s.setAttribute("index",n+1);s.className="u-btn";t.appendChild(s);var m=t.getElementsByTagName("a");for(var c=0;c<m.length;c++){m[c].onclick=function(){if(n!=parseInt(this.getAttribute("index"))){var n=parseInt(this.getAttribute("index"));t.innerHTML="";u({id:e.id,nowNum:n,allNum:r,childLength:a,callback:i});i(n,r)}return false}}}l(1)})();function makeRequest(e,t,n){var a=false;if(window.XMLHttpRequest){a=new XMLHttpRequest;if(a.overrideMimeType){a.overrideMimeType("text/xml")}}else if(window.ActiveXObject){try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(r){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(r){}}}if(!a){alert("Giving up :( Cannot create an XMLHTTP instance");return false}a.onreadystatechange=function(){if(a.readyState==4){if(a.status==200||a.status==0){n(a.responseText)}else{alert("There was a problem with the request.")}}};if(!!t){var e=e+"?"+i(t)}a.open("GET",e,true);a.send(null);function i(e){var t=[];for(var n in e){if(!e.hasOwnProperty(n)){continue}if(typeof e[n]==="function"){continue}var a=e[n].toString();n=encodeURIComponent(n);a=encodeURIComponent(a);t.push(n+"="+a)}return t.join("&")}}function isParent(e,t,n){for(var a=e;a!==n;a=a.parentNode){if(a.nodeName.toLowerCase()===t){return a}}return false}function delegateEvent(e,t,n,a){addEvent(e,n,function(e){var e=e||window.event;var t=e.target||e.srcElement;a(t,e)})}function getCookie(){var e={};var t=document.cookie;if(t==="")return e;var n=t.split("; ");for(var a=0,r=n.length;a<r;a++){var i=n[a];var o=i.indexOf("=");var l=i.substring(0,o);l=decodeURIComponent(l);var s=i.substring(o+1);s=decodeURIComponent(s);e[l]=s}return e}function addClickEvent(e,t){addEvent(e,"click",t)}function addEvent(e,t,n){if(e.addEventListener){e.addEventListener(t,n,!1)}else{e.attachEvent("on"+t,n)}}function setCookie(e,t,n,a,r,i){var o=encodeURIComponent(e)+"="+encodeURIComponent(t);if(n)o+="; expires="+n.toGMTString();if(a)o+="; path="+a;if(r)o+="; domain="+r;if(i)o+="; secure="+i;document.cookie=o}function hasClass(e,t){var n=e.className;if(!n){return false}n=n.split(/\s+/);for(var a=0,r=n.length;a<r;a++){if(n[a]===t){return true}}return false}function addClass(e,t){if(!hasClass(e,t)){e.className=e.className?[e.className,t].join(" "):t}}function removeClass(e,t){if(t&&hasClass(e,t)){var n=e.className.split(/\s+/);for(var a=0,r=n.length;a<r;a++){if(n[a]===t){n.splice(a,1);break}}e.className=n.join(" ")}}